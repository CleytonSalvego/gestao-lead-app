"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5472],{5472:(J,v,_)=>{_.r(v),_.d(v,{SupportPageModule:()=>Y});var k=_(177),g=_(4341),l=_(4742),M=_(5998),h=_(467),t=_(4438),C=_(4412),O=_(8810),m=_(9437),b=_(6354),F=_(1626);let x=(()=>{var i;class a{constructor(e){this.http=e,this.apiUrl="/api/support",this.ticketsSubject=new C.t([]),this.knowledgeArticlesSubject=new C.t([]),this.faqsSubject=new C.t([]),this.metricsSubject=new C.t(null),this.tickets$=this.ticketsSubject.asObservable(),this.knowledgeArticles$=this.knowledgeArticlesSubject.asObservable(),this.faqs$=this.faqsSubject.asObservable(),this.metrics$=this.metricsSubject.asObservable(),this.loadMockData()}getTickets(){return this.http.get(`${this.apiUrl}/tickets`).pipe((0,m.W)(this.handleError))}getTicketById(e){return this.http.get(`${this.apiUrl}/tickets/${e}`).pipe((0,m.W)(this.handleError))}createTicket(e){return this.http.post(`${this.apiUrl}/tickets`,e).pipe((0,b.T)(n=>(this.ticketsSubject.next([n,...this.ticketsSubject.value]),this.updateMetrics(),n)),(0,m.W)(this.handleError))}updateTicket(e,n){return this.http.put(`${this.apiUrl}/tickets/${e}`,n).pipe((0,b.T)(r=>{const s=this.ticketsSubject.value,c=s.findIndex(p=>p.id===e);return-1!==c&&(s[c]=r,this.ticketsSubject.next([...s])),this.updateMetrics(),r}),(0,m.W)(this.handleError))}deleteTicket(e){return this.http.delete(`${this.apiUrl}/tickets/${e}`).pipe((0,b.T)(()=>{const r=this.ticketsSubject.value.filter(s=>s.id!==e);this.ticketsSubject.next(r),this.updateMetrics()}),(0,m.W)(this.handleError))}assignTicket(e,n){return this.updateTicket(e,{assignedTo:n})}changeTicketStatus(e,n){return this.updateTicket(e,{status:n,updatedAt:new Date})}addCommunication(e,n){const r=this.ticketsSubject.value.find(s=>s.id===e);if(r){const s={id:Date.now().toString(),ticketId:e,authorId:n.authorId,authorName:n.authorName,authorType:n.authorType,content:n.content,isPublic:n.isPublic||!0,attachments:n.attachments||[],createdAt:new Date},c=[...r.communications,s];return this.updateTicket(e,{communications:c,updatedAt:new Date})}return(0,O.$)("Ticket not found")}getKnowledgeArticles(){return this.http.get(`${this.apiUrl}/knowledge-base`).pipe((0,m.W)(this.handleError))}getKnowledgeArticleById(e){return this.http.get(`${this.apiUrl}/knowledge-base/${e}`).pipe((0,m.W)(this.handleError))}createKnowledgeArticle(e){return this.http.post(`${this.apiUrl}/knowledge-base`,e).pipe((0,b.T)(n=>(this.knowledgeArticlesSubject.next([n,...this.knowledgeArticlesSubject.value]),n)),(0,m.W)(this.handleError))}updateKnowledgeArticle(e,n){return this.http.put(`${this.apiUrl}/knowledge-base/${e}`,n).pipe((0,b.T)(r=>{const s=this.knowledgeArticlesSubject.value,c=s.findIndex(p=>p.id===e);return-1!==c&&(s[c]=r,this.knowledgeArticlesSubject.next([...s])),r}),(0,m.W)(this.handleError))}searchKnowledgeBase(e){return this.http.get(`${this.apiUrl}/knowledge-base/search`,{params:{q:e}}).pipe((0,m.W)(this.handleError))}getFAQs(){return this.http.get(`${this.apiUrl}/faqs`).pipe((0,m.W)(this.handleError))}createFAQ(e){return this.http.post(`${this.apiUrl}/faqs`,e).pipe((0,b.T)(n=>(this.faqsSubject.next([n,...this.faqsSubject.value]),n)),(0,m.W)(this.handleError))}checkSLAViolations(){return this.http.get(`${this.apiUrl}/sla/violations`).pipe((0,m.W)(this.handleError))}calculateSLATimeRemaining(e){const n=new Date,r=new Date(e.createdAt.getTime()+60*e.sla.responseTime*60*1e3);return Math.max(0,r.getTime()-n.getTime())}getMetrics(){return this.http.get(`${this.apiUrl}/metrics`).pipe((0,m.W)(this.handleError))}updateMetrics(){const e=this.ticketsSubject.value,n=e.length,r=e.filter(u=>"open"===u.status).length,s=e.filter(u=>"closed"===u.status).length,c=e.filter(u=>u.communications.length>0).map(u=>{const f=u.communications.find(W=>W.isPublic);return f?(f.createdAt.getTime()-u.createdAt.getTime())/36e5:0}),p=c.length>0?c.reduce((u,f)=>u+f,0)/c.length:0,d=e.filter(u=>this.calculateSLATimeRemaining(u)<=0&&"closed"!==u.status).length,P={period:{start:new Date(Date.now()-2592e6),end:new Date},tickets:{total:n,open:r,resolved:e.filter(u=>"resolved"===u.status).length,closed:s,byCategory:e.reduce((u,f)=>(u[f.category]=(u[f.category]||0)+1,u),{}),byPriority:{low:e.filter(u=>"low"===u.priority).length,medium:e.filter(u=>"medium"===u.priority).length,high:e.filter(u=>"high"===u.priority).length,urgent:e.filter(u=>"urgent"===u.priority).length,critical:e.filter(u=>"critical"===u.priority).length}},sla:{responseTime:{average:p,breached:d,percentage:(n-d)/n*100||100},resolutionTime:{average:2*p,breached:d,percentage:(n-d)/n*100||100}},customerSatisfaction:{average:4.2,responses:n,distribution:{5:60,4:25,3:10,2:3,1:2}},agents:{totalAgents:5,activeAgents:4,avgTicketsPerAgent:n/4,topPerformers:[]}};this.metricsSubject.next(P)}loadMockData(){const e=[{id:"1",title:"Problema com login na plataforma",description:"Usu\xe1rio n\xe3o consegue fazer login ap\xf3s reset de senha",category:"technical",priority:"high",status:"open",type:"incident",requesterId:"customer-1",requesterName:"Jo\xe3o Silva",requesterEmail:"joao@email.com",assignedTo:"agent-1",assignedToName:"Ana Santos",tags:["login","senha"],sla:{responseTime:240,resolutionTime:1440,responseDeadline:new Date(Date.now()+144e5),resolutionDeadline:new Date(Date.now()+864e5),isResponseBreached:!1,isResolutionBreached:!1},communications:[],attachments:[],createdAt:new Date(Date.now()-72e5),updatedAt:new Date},{id:"2",title:"D\xfavida sobre cobertura de ap\xf3lice",description:"Cliente quer entender melhor a cobertura do seu seguro auto",category:"product",priority:"medium",status:"in_progress",type:"question",requesterId:"customer-2",requesterName:"Maria Oliveira",requesterEmail:"maria@email.com",assignedTo:"agent-2",assignedToName:"Carlos Lima",tags:["cobertura","seguro-auto"],sla:{responseTime:480,resolutionTime:2880,responseDeadline:new Date(Date.now()+288e5),resolutionDeadline:new Date(Date.now()+1728e5),isResponseBreached:!1,isResolutionBreached:!1},communications:[],attachments:[],createdAt:new Date(Date.now()-216e5),updatedAt:new Date}],n=[{id:"1",title:"Como redefinir senha do sistema",content:"Passo a passo para redefinir a senha...",summary:"Guia r\xe1pido para redefinir senhas",category:"technical",tags:["senha","login","acesso"],authorId:"admin",authorName:"Administrador",status:"published",visibility:"public",views:156,likes:45,helpful:23,notHelpful:2,relatedArticles:[],attachments:[],createdAt:new Date(Date.now()-6048e5),updatedAt:new Date,publishedAt:new Date(Date.now()-6048e5)}],r=[{id:"1",question:"Como posso alterar meus dados pessoais?",answer:"Acesse Configura\xe7\xf5es > Perfil e clique em Editar.",category:"account",tags:["perfil","dados","configura\xe7\xf5es"],isPublic:!0,views:89,helpful:12,notHelpful:1,createdBy:"admin",createdAt:new Date(Date.now()-432e6),updatedAt:new Date(Date.now()-1728e5)}];this.ticketsSubject.next(e),this.knowledgeArticlesSubject.next(n),this.faqsSubject.next(r),this.updateMetrics()}handleError(e){return console.error("Support Service Error:",e),(0,O.$)(e)}}return(i=a).\u0275fac=function(e){return new(e||i)(t.KVO(F.Qq))},i.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),a})();function y(i,a){if(1&i&&(t.j41(0,"div",19)(1,"div",20)(2,"div",21),t.EFF(3),t.k0s(),t.j41(4,"div",22),t.EFF(5,"Total de Tickets"),t.k0s()(),t.j41(6,"div",20)(7,"div",21),t.EFF(8),t.k0s(),t.j41(9,"div",22),t.EFF(10,"Tickets Abertos"),t.k0s()(),t.j41(11,"div",20)(12,"div",21),t.EFF(13),t.nI1(14,"number"),t.k0s(),t.j41(15,"div",22),t.EFF(16,"Tempo M\xe9dio Resposta"),t.k0s()(),t.j41(17,"div",20)(18,"div",21),t.EFF(19),t.nI1(20,"number"),t.k0s(),t.j41(21,"div",22),t.EFF(22,"SLA Compliance"),t.k0s()()()),2&i){const o=t.XpG();t.R7$(3),t.JRh(o.metrics.tickets.total),t.R7$(5),t.JRh(o.metrics.tickets.open),t.R7$(5),t.SpI("",t.i5U(14,4,o.metrics.sla.responseTime.average,"1.1-1"),"h"),t.R7$(6),t.SpI("",t.i5U(20,7,o.metrics.sla.responseTime.percentage,"1.0-0"),"%")}}function j(i,a){if(1&i){const o=t.RV6();t.j41(0,"ion-button",37),t.bIt("click",function(){t.eBV(o);const n=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.changeTicketStatus(n,"closed"))}),t.nrm(1,"ion-icon",42),t.EFF(2," Fechar "),t.k0s()}}function S(i,a){if(1&i){const o=t.RV6();t.j41(0,"ion-card",30)(1,"ion-card-header")(2,"div",31)(3,"div",32)(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"div",33)(10,"ion-chip",34),t.EFF(11),t.k0s(),t.j41(12,"ion-chip",34),t.EFF(13),t.k0s()()()(),t.j41(14,"ion-card-content")(15,"p",35),t.EFF(16),t.k0s(),t.j41(17,"div",36)(18,"ion-button",37),t.bIt("click",function(){const n=t.eBV(o).$implicit,r=t.XpG(2);return t.Njj(r.openTicketModal(n))}),t.nrm(19,"ion-icon",38),t.EFF(20," Editar "),t.k0s(),t.DNE(21,j,3,0,"ion-button",39),t.j41(22,"ion-button",40),t.bIt("click",function(){const n=t.eBV(o).$implicit,r=t.XpG(2);return t.Njj(r.deleteTicket(n))}),t.nrm(23,"ion-icon",41),t.EFF(24," Excluir "),t.k0s()()()()}if(2&i){const o=a.$implicit,e=t.XpG(2);t.R7$(5),t.JRh(o.title),t.R7$(2),t.Lme("",e.getCategoryText(o.category)," \u2022 ",t.i5U(8,9,o.createdAt,"dd/MM/yyyy HH:mm"),""),t.R7$(3),t.Y8G("color",e.getPriorityColor(o.priority)),t.R7$(),t.SpI(" ",e.getPriorityText(o.priority)," "),t.R7$(),t.Y8G("color",e.getStatusColor(o.status)),t.R7$(),t.SpI(" ",e.getStatusText(o.status)," "),t.R7$(3),t.JRh(o.description),t.R7$(5),t.Y8G("ngIf","closed"!==o.status)}}function T(i,a){if(1&i){const o=t.RV6();t.j41(0,"div",43),t.nrm(1,"ion-icon",12),t.j41(2,"h3"),t.EFF(3,"Nenhum ticket encontrado"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Crie seu primeiro ticket de suporte para come\xe7ar."),t.k0s(),t.j41(6,"ion-button",25),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.openTicketModal())}),t.nrm(7,"ion-icon",26),t.EFF(8," Criar Ticket "),t.k0s()()}}function w(i,a){if(1&i){const o=t.RV6();t.j41(0,"div",23)(1,"div",24)(2,"h2"),t.EFF(3,"Tickets de Suporte"),t.k0s(),t.j41(4,"ion-button",25),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.openTicketModal())}),t.nrm(5,"ion-icon",26),t.EFF(6," Novo Ticket "),t.k0s()(),t.j41(7,"div",27),t.DNE(8,S,25,12,"ion-card",28)(9,T,9,0,"div",29),t.k0s()()}if(2&i){const o=t.XpG();t.R7$(8),t.Y8G("ngForOf",o.tickets),t.R7$(),t.Y8G("ngIf",0===o.tickets.length)}}function E(i,a){if(1&i&&(t.j41(0,"ion-chip",57),t.EFF(1),t.k0s()),2&i){const o=a.$implicit;t.R7$(),t.SpI(" ",o," ")}}function $(i,a){if(1&i&&(t.j41(0,"ion-card",46)(1,"ion-card-header")(2,"div",47)(3,"h3"),t.EFF(4),t.k0s(),t.j41(5,"div",48)(6,"span",49),t.EFF(7),t.k0s(),t.j41(8,"span",50),t.EFF(9),t.k0s()()()(),t.j41(10,"ion-card-content")(11,"div",51)(12,"p"),t.EFF(13),t.nI1(14,"slice"),t.k0s()(),t.j41(15,"div",52),t.DNE(16,E,2,1,"ion-chip",53),t.k0s(),t.j41(17,"div",54)(18,"span",55),t.EFF(19),t.k0s(),t.j41(20,"span",56),t.EFF(21),t.nI1(22,"date"),t.k0s()()()()),2&i){const o=a.$implicit;t.R7$(4),t.JRh(o.title),t.R7$(3),t.JRh(o.category),t.R7$(2),t.SpI("",o.views," visualiza\xe7\xf5es"),t.R7$(4),t.SpI("",t.brH(14,7,o.content,0,200),"..."),t.R7$(3),t.Y8G("ngForOf",o.tags),t.R7$(3),t.SpI("Por ",o.authorName,""),t.R7$(2),t.JRh(t.i5U(22,11,o.createdAt,"dd/MM/yyyy"))}}function A(i,a){if(1&i){const o=t.RV6();t.j41(0,"div",43),t.nrm(1,"ion-icon",14),t.j41(2,"h3"),t.EFF(3,"Nenhum artigo encontrado"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Crie artigos para compartilhar conhecimento com a equipe."),t.k0s(),t.j41(6,"ion-button",25),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.openArticleModal())}),t.nrm(7,"ion-icon",26),t.EFF(8," Criar Artigo "),t.k0s()()}}function R(i,a){if(1&i){const o=t.RV6();t.j41(0,"div",23)(1,"div",24)(2,"h2"),t.EFF(3,"Base de Conhecimento"),t.k0s(),t.j41(4,"ion-button",25),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.openArticleModal())}),t.nrm(5,"ion-icon",26),t.EFF(6," Novo Artigo "),t.k0s()(),t.j41(7,"div",44),t.DNE(8,$,23,14,"ion-card",45)(9,A,9,0,"div",29),t.k0s()()}if(2&i){const o=t.XpG();t.R7$(8),t.Y8G("ngForOf",o.knowledgeArticles),t.R7$(),t.Y8G("ngIf",0===o.knowledgeArticles.length)}}function D(i,a){if(1&i&&(t.j41(0,"ion-card",60)(1,"ion-card-header")(2,"h3"),t.EFF(3),t.k0s()(),t.j41(4,"ion-card-content")(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"div",61)(8,"span",50),t.EFF(9),t.k0s(),t.j41(10,"div",62)(11,"ion-button",63),t.nrm(12,"ion-icon",64),t.EFF(13),t.k0s(),t.j41(14,"ion-button",65),t.nrm(15,"ion-icon",66),t.EFF(16),t.k0s()()()()()),2&i){const o=a.$implicit;t.R7$(3),t.JRh(o.question),t.R7$(3),t.JRh(o.answer),t.R7$(3),t.SpI("",o.views," visualiza\xe7\xf5es"),t.R7$(4),t.SpI(" ",o.helpful," "),t.R7$(3),t.SpI(" ",o.notHelpful," ")}}function I(i,a){1&i&&(t.j41(0,"div",43),t.nrm(1,"ion-icon",16),t.j41(2,"h3"),t.EFF(3,"Nenhuma pergunta frequente"),t.k0s(),t.j41(4,"p"),t.EFF(5,"As perguntas mais comuns aparecer\xe3o aqui."),t.k0s()())}function q(i,a){if(1&i&&(t.j41(0,"div",23)(1,"div",24)(2,"h2"),t.EFF(3,"Perguntas Frequentes"),t.k0s()(),t.j41(4,"div",58),t.DNE(5,D,17,5,"ion-card",59)(6,I,6,0,"div",29),t.k0s()()),2&i){const o=t.XpG();t.R7$(5),t.Y8G("ngForOf",o.faqs),t.R7$(),t.Y8G("ngIf",0===o.faqs.length)}}function G(i,a){if(1&i&&(t.j41(0,"ion-select-option",77),t.EFF(1),t.k0s()),2&i){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.SpI(" ",o.label," ")}}function N(i,a){if(1&i&&(t.j41(0,"ion-select-option",77),t.EFF(1),t.k0s()),2&i){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.SpI(" ",o.label," ")}}function z(i,a){if(1&i){const o=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",4)(5,"ion-button",25),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.closeModal())}),t.nrm(6,"ion-icon",67),t.k0s()()()(),t.j41(7,"ion-content")(8,"form",68)(9,"ion-item")(10,"ion-label",69),t.EFF(11,"T\xedtulo *"),t.k0s(),t.nrm(12,"ion-input",70),t.k0s(),t.j41(13,"ion-item")(14,"ion-label",69),t.EFF(15,"Categoria *"),t.k0s(),t.j41(16,"ion-select",71),t.DNE(17,G,2,2,"ion-select-option",72),t.k0s()(),t.j41(18,"ion-item")(19,"ion-label",69),t.EFF(20,"Prioridade *"),t.k0s(),t.j41(21,"ion-select",73),t.DNE(22,N,2,2,"ion-select-option",72),t.k0s()(),t.j41(23,"ion-item")(24,"ion-label",69),t.EFF(25,"Descri\xe7\xe3o *"),t.k0s(),t.nrm(26,"ion-textarea",74),t.k0s()()(),t.j41(27,"ion-footer")(28,"ion-toolbar")(29,"ion-buttons",4)(30,"ion-button",75),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.closeModal())}),t.EFF(31,"Cancelar"),t.k0s(),t.j41(32,"ion-button",76),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.saveTicket())}),t.EFF(33,"Salvar"),t.k0s()()()()}if(2&i){const o=t.XpG();t.R7$(3),t.SpI("",o.selectedTicket?"Editar":"Novo"," Ticket"),t.R7$(5),t.Y8G("formGroup",o.ticketForm),t.R7$(9),t.Y8G("ngForOf",o.ticketCategories),t.R7$(5),t.Y8G("ngForOf",o.ticketPriorities)}}function B(i,a){if(1&i&&(t.j41(0,"ion-select-option",77),t.EFF(1),t.k0s()),2&i){const o=a.$implicit;t.Y8G("value",o.value),t.R7$(),t.SpI(" ",o.label," ")}}function X(i,a){if(1&i){const o=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Novo Artigo"),t.k0s(),t.j41(4,"ion-buttons",4)(5,"ion-button",25),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.closeModal())}),t.nrm(6,"ion-icon",67),t.k0s()()()(),t.j41(7,"ion-content")(8,"form",78)(9,"ion-item")(10,"ion-label",69),t.EFF(11,"T\xedtulo *"),t.k0s(),t.nrm(12,"ion-input",79),t.k0s(),t.j41(13,"ion-item")(14,"ion-label",69),t.EFF(15,"Categoria *"),t.k0s(),t.j41(16,"ion-select",71),t.DNE(17,B,2,2,"ion-select-option",72),t.k0s()(),t.j41(18,"ion-item")(19,"ion-label",69),t.EFF(20,"Tags"),t.k0s(),t.nrm(21,"ion-input",80),t.k0s(),t.j41(22,"ion-item")(23,"ion-label",69),t.EFF(24,"Conte\xfado *"),t.k0s(),t.nrm(25,"ion-textarea",81),t.k0s()()(),t.j41(26,"ion-footer")(27,"ion-toolbar")(28,"ion-buttons",4)(29,"ion-button",75),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.closeModal())}),t.EFF(30,"Cancelar"),t.k0s(),t.j41(31,"ion-button",76),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.saveArticle())}),t.EFF(32,"Publicar"),t.k0s()()()()}if(2&i){const o=t.XpG();t.R7$(8),t.Y8G("formGroup",o.articleForm),t.R7$(9),t.Y8G("ngForOf",o.ticketCategories)}}const V=[{path:"",component:(()=>{var i;class a{constructor(e,n,r,s,c,p){this.fb=e,this.supportService=n,this.alertController=r,this.loadingController=s,this.toastController=c,this.modalController=p,this.selectedSegment="tickets",this.tickets=[],this.knowledgeArticles=[],this.faqs=[],this.metrics=null,this.showTicketModal=!1,this.showArticleModal=!1,this.selectedTicket=null,this.ticketCategories=[{value:"technical",label:"T\xe9cnico"},{value:"billing",label:"Financeiro"},{value:"product",label:"Produto"},{value:"feature_request",label:"Solicita\xe7\xe3o de Feature"}],this.ticketPriorities=[{value:"low",label:"Baixa"},{value:"medium",label:"M\xe9dia"},{value:"high",label:"Alta"},{value:"critical",label:"Cr\xedtica"}],this.ticketForm=this.fb.group({title:["",[g.k0.required]],description:["",[g.k0.required]],category:["",[g.k0.required]],priority:["",[g.k0.required]]}),this.articleForm=this.fb.group({title:["",[g.k0.required]],content:["",[g.k0.required]],category:["",[g.k0.required]],tags:[""]})}ngOnInit(){this.loadData()}loadData(){this.supportService.tickets$.subscribe(e=>{this.tickets=e}),this.supportService.knowledgeArticles$.subscribe(e=>{this.knowledgeArticles=e}),this.supportService.faqs$.subscribe(e=>{this.faqs=e}),this.supportService.metrics$.subscribe(e=>{this.metrics=e})}segmentChanged(e){this.selectedSegment=e.detail.value}openTicketModal(e){this.selectedTicket=e||null,e?this.ticketForm.patchValue({title:e.title,description:e.description,category:e.category,priority:e.priority}):this.ticketForm.reset(),this.showTicketModal=!0}saveTicket(){var e=this;return(0,h.A)(function*(){if(e.ticketForm.invalid)return void(yield(yield e.toastController.create({message:"Por favor, preencha todos os campos obrigat\xf3rios",duration:3e3,color:"warning"})).present());const n=yield e.loadingController.create({message:"Salvando ticket..."});yield n.present();const r=e.ticketForm.value,s={title:r.title,description:r.description,category:r.category,priority:r.priority,customerId:"current-user",status:"open"};var p;(e.selectedTicket?e.supportService.updateTicket(e.selectedTicket.id,s):e.supportService.createTicket(s)).subscribe({next:(p=(0,h.A)(function*(){n.dismiss(),e.showTicketModal=!1,yield(yield e.toastController.create({message:"Ticket salvo com sucesso!",duration:3e3,color:"success"})).present()}),function(){return p.apply(this,arguments)}),error:function(){var p=(0,h.A)(function*(d){n.dismiss(),yield(yield e.toastController.create({message:"Erro ao salvar ticket",duration:3e3,color:"danger"})).present()});return function(P){return p.apply(this,arguments)}}()})})()}changeTicketStatus(e,n){var r=this;return(0,h.A)(function*(){const s=yield r.loadingController.create({message:"Atualizando status..."});var c;yield s.present(),r.supportService.changeTicketStatus(e.id,n).subscribe({next:(c=(0,h.A)(function*(){s.dismiss(),yield(yield r.toastController.create({message:"Status atualizado com sucesso!",duration:2e3,color:"success"})).present()}),function(){return c.apply(this,arguments)}),error:function(){var c=(0,h.A)(function*(p){s.dismiss(),yield(yield r.toastController.create({message:"Erro ao atualizar status",duration:3e3,color:"danger"})).present()});return function(d){return c.apply(this,arguments)}}()})})()}deleteTicket(e){var n=this;return(0,h.A)(function*(){var s;yield(yield n.alertController.create({header:"Excluir Ticket",message:"Tem certeza que deseja excluir este ticket? Esta a\xe7\xe3o n\xe3o pode ser desfeita.",buttons:[{text:"Cancelar",role:"cancel"},{text:"Excluir",role:"destructive",handler:(s=(0,h.A)(function*(){const c=yield n.loadingController.create({message:"Excluindo ticket..."});var p;yield c.present(),n.supportService.deleteTicket(e.id).subscribe({next:(p=(0,h.A)(function*(){c.dismiss(),yield(yield n.toastController.create({message:"Ticket exclu\xeddo com sucesso!",duration:3e3,color:"success"})).present()}),function(){return p.apply(this,arguments)}),error:function(){var p=(0,h.A)(function*(d){c.dismiss(),yield(yield n.toastController.create({message:"Erro ao excluir ticket",duration:3e3,color:"danger"})).present()});return function(P){return p.apply(this,arguments)}}()})}),function(){return s.apply(this,arguments)})}]})).present()})()}openArticleModal(e){e?this.articleForm.patchValue({title:e.title,content:e.content,category:e.category,tags:e.tags.join(", ")}):this.articleForm.reset(),this.showArticleModal=!0}saveArticle(){var e=this;return(0,h.A)(function*(){if(e.articleForm.invalid)return void(yield(yield e.toastController.create({message:"Por favor, preencha todos os campos obrigat\xf3rios",duration:3e3,color:"warning"})).present());const n=yield e.loadingController.create({message:"Salvando artigo..."});yield n.present();const r=e.articleForm.value,s={title:r.title,content:r.content,category:r.category,tags:r.tags.split(",").map(c=>c.trim()).filter(c=>c),author:"current-user",status:"published"};var c;e.supportService.createKnowledgeArticle(s).subscribe({next:(c=(0,h.A)(function*(){n.dismiss(),e.showArticleModal=!1,yield(yield e.toastController.create({message:"Artigo salvo com sucesso!",duration:3e3,color:"success"})).present()}),function(){return c.apply(this,arguments)}),error:function(){var c=(0,h.A)(function*(p){n.dismiss(),yield(yield e.toastController.create({message:"Erro ao salvar artigo",duration:3e3,color:"danger"})).present()});return function(d){return c.apply(this,arguments)}}()})})()}getStatusColor(e){switch(e){case"open":return"primary";case"in_progress":return"warning";case"resolved":return"success";default:return"medium"}}getStatusText(e){switch(e){case"open":return"Aberto";case"in_progress":return"Em Andamento";case"resolved":return"Resolvido";case"closed":return"Fechado";default:return"Desconhecido"}}getPriorityColor(e){switch(e){case"low":return"success";case"medium":return"warning";case"high":return"danger";case"critical":return"dark";default:return"medium"}}getPriorityText(e){switch(e){case"low":return"Baixa";case"medium":return"M\xe9dia";case"high":return"Alta";case"critical":return"Cr\xedtica";default:return"Desconhecida"}}getCategoryText(e){return{technical:"T\xe9cnico",billing:"Financeiro",product:"Produto",integration:"Integra\xe7\xe3o",training:"Treinamento",feature_request:"Solicita\xe7\xe3o de Feature",bug_report:"Relat\xf3rio de Bug",other:"Outros"}[e]||e}closeModal(){this.showTicketModal=!1,this.showArticleModal=!1}}return(i=a).\u0275fac=function(e){return new(e||i)(t.rXU(g.ok),t.rXU(x),t.rXU(l.hG),t.rXU(l.Xi),t.rXU(l.K_),t.rXU(l.W3))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-support"]],decls:35,vars:8,consts:[[3,"translucent"],["slot","start"],[1,"toolbar-title-container"],[1,"toolbar-subtitle"],["slot","end"],["fill","clear"],["name","help-circle","slot","icon-only"],[3,"fullscreen"],[1,"support-container"],["class","metrics-grid",4,"ngIf"],["value","tickets",3,"ionChange"],["value","tickets"],["name","document-text-outline"],["value","knowledge"],["name","library-outline"],["value","faq"],["name","help-circle-outline"],["class","content-section",4,"ngIf"],[3,"didDismiss","isOpen"],[1,"metrics-grid"],[1,"metric-card"],[1,"metric-value"],[1,"metric-label"],[1,"content-section"],[1,"section-header"],[3,"click"],["name","add","slot","start"],[1,"tickets-list"],["class","ticket-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"ticket-card"],[1,"ticket-header"],[1,"ticket-info"],[1,"ticket-badges"],["size","small",3,"color"],[1,"ticket-description"],[1,"ticket-actions"],["fill","clear","size","small",3,"click"],["name","create","slot","start"],["fill","clear","size","small",3,"click",4,"ngIf"],["fill","clear","size","small","color","danger",3,"click"],["name","trash","slot","start"],["name","checkmark-circle","slot","start"],[1,"empty-state"],[1,"articles-list"],["class","article-card",4,"ngFor","ngForOf"],[1,"article-card"],[1,"article-header"],[1,"article-meta"],[1,"category"],[1,"views"],[1,"article-content"],[1,"article-tags"],["size","small","outline","",4,"ngFor","ngForOf"],[1,"article-footer"],[1,"author"],[1,"date"],["size","small","outline",""],[1,"faq-list"],["class","faq-card",4,"ngFor","ngForOf"],[1,"faq-card"],[1,"faq-footer"],[1,"helpful-buttons"],["fill","clear","size","small","color","primary"],["name","thumbs-up","slot","start"],["fill","clear","size","small","color","danger"],["name","thumbs-down","slot","start"],["name","close"],[1,"ticket-form",3,"formGroup"],["position","stacked"],["formControlName","title","placeholder","Descreva brevemente o problema"],["formControlName","category","placeholder","Selecione a categoria"],[3,"value",4,"ngFor","ngForOf"],["formControlName","priority","placeholder","Selecione a prioridade"],["formControlName","description","placeholder","Descreva detalhadamente o problema...","rows","6"],["color","medium",3,"click"],["color","primary",3,"click"],[3,"value"],[1,"article-form",3,"formGroup"],["formControlName","title","placeholder","T\xedtulo do artigo"],["formControlName","tags","placeholder","Tags separadas por v\xedrgula"],["formControlName","content","placeholder","Conte\xfado do artigo...","rows","10"]],template:function(e,n){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"div",2)(5,"ion-title"),t.EFF(6,"Suporte"),t.k0s(),t.j41(7,"p",3),t.EFF(8,"Gerencie tickets, base de conhecimento e FAQ"),t.k0s()(),t.j41(9,"ion-buttons",4)(10,"ion-button",5),t.nrm(11,"ion-icon",6),t.k0s()()()(),t.j41(12,"ion-content",7)(13,"div",8),t.DNE(14,y,23,10,"div",9),t.j41(15,"ion-segment",10),t.bIt("ionChange",function(s){return n.segmentChanged(s)}),t.j41(16,"ion-segment-button",11)(17,"ion-label"),t.EFF(18,"Tickets"),t.k0s(),t.nrm(19,"ion-icon",12),t.k0s(),t.j41(20,"ion-segment-button",13)(21,"ion-label"),t.EFF(22,"Base de Conhecimento"),t.k0s(),t.nrm(23,"ion-icon",14),t.k0s(),t.j41(24,"ion-segment-button",15)(25,"ion-label"),t.EFF(26,"FAQ"),t.k0s(),t.nrm(27,"ion-icon",16),t.k0s()(),t.DNE(28,w,10,2,"div",17)(29,R,10,2,"div",17)(30,q,7,2,"div",17),t.k0s(),t.j41(31,"ion-modal",18),t.bIt("didDismiss",function(){return n.closeModal()}),t.DNE(32,z,34,4,"ng-template"),t.k0s(),t.j41(33,"ion-modal",18),t.bIt("didDismiss",function(){return n.closeModal()}),t.DNE(34,X,33,2,"ng-template"),t.k0s()()),2&e&&(t.Y8G("translucent",!0),t.R7$(12),t.Y8G("fullscreen",!0),t.R7$(2),t.Y8G("ngIf",n.metrics),t.R7$(14),t.Y8G("ngIf","tickets"===n.selectedSegment),t.R7$(),t.Y8G("ngIf","knowledge"===n.selectedSegment),t.R7$(),t.Y8G("ngIf","faq"===n.selectedSegment),t.R7$(),t.Y8G("isOpen",n.showTicketModal),t.R7$(2),t.Y8G("isOpen",n.showArticleModal))},dependencies:[k.Sq,k.bT,g.qT,g.BC,g.cb,g.j4,g.JD,l.Jm,l.QW,l.b_,l.I9,l.ME,l.ZB,l.W9,l.M0,l.eU,l.iq,l.$w,l.uz,l.he,l.MC,l.Gp,l.eP,l.Nm,l.Ip,l.nc,l.BC,l.ai,l.Sb,l.Je,l.Gw,k.P9,k.QX,k.vh],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--gray-50) 0%, var(--primary-200) 100%)}@media (prefers-color-scheme: dark){ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--gray-900) 0%, var(--gray-800) 100%)}}ion-toolbar[_ngcontent-%COMP%]{--background: white;--color: #2c3e50;--border-color: #e9ecef}ion-toolbar[_ngcontent-%COMP%]   .toolbar-title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;flex:1}ion-toolbar[_ngcontent-%COMP%]   .toolbar-title-container[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;margin:0;padding:0}ion-toolbar[_ngcontent-%COMP%]   .toolbar-title-container[_ngcontent-%COMP%]   .toolbar-subtitle[_ngcontent-%COMP%]{margin:0;font-size:.75rem;color:var(--text-muted);line-height:1.2;font-weight:400}.support-container[_ngcontent-%COMP%]{padding:16px;max-width:1200px;margin:0 auto}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.metric-card[_ngcontent-%COMP%]{background:var(--ion-color-light);border-radius:12px;padding:20px;text-align:center;border:1px solid var(--ion-color-step-200)}.metric-card[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:var(--ion-color-primary);margin-bottom:4px}.metric-card[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--ion-color-medium);font-weight:500}ion-segment[_ngcontent-%COMP%]{margin-bottom:24px}ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{min-height:48px}ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-top:4px}.content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--ion-color-dark);margin:0}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]   .ticket-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]   .ticket-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]{flex:1}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]   .ticket-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.125rem;font-weight:600;color:var(--ion-color-dark)}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]   .ticket-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--ion-color-medium)}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]   .ticket-header[_ngcontent-%COMP%]   .ticket-badges[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]   .ticket-description[_ngcontent-%COMP%]{margin:16px 0;line-height:1.5;color:var(--ion-color-dark)}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]   .ticket-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-step-150)}.tickets-list[_ngcontent-%COMP%]   .ticket-card[_ngcontent-%COMP%]   .ticket-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;font-size:.875rem}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.125rem;font-weight:600;color:var(--ion-color-dark)}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:.875rem}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]   .views[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-content[_ngcontent-%COMP%]{margin:16px 0}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;color:var(--ion-color-dark)}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-tags[_ngcontent-%COMP%]{margin:16px 0;display:flex;gap:8px;flex-wrap:wrap}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem;color:var(--ion-color-medium);margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-step-150)}.articles-list[_ngcontent-%COMP%]   .article-card[_ngcontent-%COMP%]   .article-footer[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{font-weight:500}.faq-list[_ngcontent-%COMP%]   .faq-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.faq-list[_ngcontent-%COMP%]   .faq-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:var(--ion-color-dark)}.faq-list[_ngcontent-%COMP%]   .faq-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:16px 0;line-height:1.6;color:var(--ion-color-dark)}.faq-list[_ngcontent-%COMP%]   .faq-card[_ngcontent-%COMP%]   .faq-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-step-150)}.faq-list[_ngcontent-%COMP%]   .faq-card[_ngcontent-%COMP%]   .faq-footer[_ngcontent-%COMP%]   .views[_ngcontent-%COMP%]{font-size:.875rem;color:var(--ion-color-medium)}.faq-list[_ngcontent-%COMP%]   .faq-card[_ngcontent-%COMP%]   .faq-footer[_ngcontent-%COMP%]   .helpful-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.faq-list[_ngcontent-%COMP%]   .faq-card[_ngcontent-%COMP%]   .faq-footer[_ngcontent-%COMP%]   .helpful-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:.875rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:8px;color:var(--ion-color-dark)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.5;margin-bottom:24px;max-width:400px;margin-left:auto;margin-right:auto}.ticket-form[_ngcontent-%COMP%], .article-form[_ngcontent-%COMP%]{padding:16px}.ticket-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .article-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;margin-bottom:16px}.ticket-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .article-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:4px}.ticket-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], .article-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-top: 12px;--padding-bottom: 12px}@media (max-width: 768px){.support-container[_ngcontent-%COMP%]{padding:12px}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.section-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}.ticket-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.ticket-actions[_ngcontent-%COMP%]{flex-direction:column}.ticket-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.article-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.faq-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.faq-footer[_ngcontent-%COMP%]   .helpful-buttons[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}}@media (prefers-color-scheme: dark){.metric-card[_ngcontent-%COMP%]{background:var(--ion-color-step-100);border-color:var(--ion-color-step-200)}.ticket-card[_ngcontent-%COMP%], .article-card[_ngcontent-%COMP%], .faq-card[_ngcontent-%COMP%]{background:var(--ion-color-step-50)}}"]}),a})()}];let U=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[M.iI.forChild(V),M.iI]}),a})(),Y=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[k.MD,g.YN,g.X1,l.bv,U]}),a})()}}]);